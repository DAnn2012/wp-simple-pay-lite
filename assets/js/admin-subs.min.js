/*! WP Simple Pay Pro 3 - 3.6.0-beta-3
 * https://wpsimplepay.com/
 * Copyright (c) Sandhills Development, LLC 2019
 * Licensed GPLv2+ */

!function(t){var n={};function e(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(a,i,function(n){return t[n]}.bind(null,i));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=15)}({15:function(t,n){var e={};!function(t){"use strict";var n,a;e={init:function(){n=t(document.body),a=n.find("#subscription-options-settings-panel"),this.loadMultiPlanSubscriptions(),this.initSortablePlans(a.find(".simpay-multi-subscriptions tbody")),a.find(".simpay-add-plan").on("click.simpayAddPlan",function(t){t.preventDefault(),e.addPlan(t)}),a.find(".simpay-panel-field").on("click.simpayRemovePlan",".simpay-remove-plan",function(n){e.removePlan(t(this),n)}),e.setDefaultPlan(),a.find(".simpay-multi-subscriptions").on("click.simpayUpdateDefaultPlan",'.simpay-multi-plan-default input[type="radio"]',function(n){e.updateDefaultPlan(t(this))}),a.find(".simpay-multi-subscriptions").on("change.simpayUpdatePlanSelect",".simpay-multi-plan-select",function(n){e.updatePlanSelect(t(this))}),a.find("#_subscription_custom_amount").find('input[type="radio"]').on("change.simpayToggleSubscription",function(n){e.togglePlans(t(this))}),""===a.find("#simpay-multi-plan-default-value").val()&&a.find('.simpay-multi-plan-default input[type="radio"]:first').trigger("click.simpayUpdateDefaultPlan")},initSortablePlans:function(t){t.sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort-handle",scrollSensitivity:40,forcePlaceholderSize:!0,opacity:.65,stop:function(t,n){e.orderPlans()},helper:function(t,n){return n.clone().find(":input").attr("name",function(t,n){return"sort_"+parseInt(1e5*Math.random(),10).toString()+"_"+n}).end()}})},loadMultiPlanSubscriptions:function(){var n=a.find(".simpay-multi-sub").get();n.sort(function(n,e){var a=parseInt(t(n).attr("rel"),10),i=parseInt(t(e).attr("rel"),10);return a<i?-1:a>i?1:0}),a.find(n).each(function(t,n){a.find(".simpay-multi-subscriptions tbody").append(n)})},togglePlans:function(t){"enabled"===t.val()&&t.is(":checked")?n.find("#_single_plan").prop("disabled",!0).trigger("chosen:updated"):n.find("#_single_plan").prop("disabled",!1).trigger("chosen:updated")},updatePlanSelect:function(t){var n=t.parent().data("field-key");a.find("#simpay-subscription-multi-plan-default-"+n+"-yes").is(":checked")&&a.find("#simpay-multi-plan-default-value").val(t.find("option:selected").val())},setDefaultPlan:function(){var t=document.getElementById("simpay-multi-plan-default-value"),n=document.querySelector(".simpay-multi-plan-default input:checked");if(!(n&&n.dataset.planId===t.value||(n&&n.dataset.planId!==t.value&&(t.value=n.dataset.planId),n))){var e=document.querySelector(".simpay-multi-plan-default input");if(!e)return;e.checked=!0,t.value=e.dataset.planId}},updateDefaultPlan:function(t){var n=t.closest(".simpay-multi-plan-default").parent().find(".simpay-multi-plan-select").find("option:selected").val();a.find("#simpay-multi-plan-default-value").val(n)},orderPlans:function(){a.find(".simpay-multi-sub").each(function(n,e){var i=parseInt(t(e).index(".simpay-multi-sub"));a.find(".plan-order",e).val(i)})},addPlan:function(e){var i=a.find(".simpay-multi-subscriptions tbody"),l={action:"simpay_add_plan",counter:parseInt(a.find(".simpay-multi-sub:last").data("field-key"))+1,addPlanNonce:n.find("#simpay_add_plan_nonce").val()};e.preventDefault(),t.ajax({url:ajaxurl,method:"POST",data:l,success:function(t){i.append(t),i.find("select").chosen()},error:function(t){spShared.debugLog(t)}})},removePlan:function(t,n){n.preventDefault(),t.closest(".simpay-multi-sub").remove(),e.setDefaultPlan()}},t(document).ready(function(t){e.init()})}(jQuery)}});
//# sourceMappingURL=admin-subs.min.js.map